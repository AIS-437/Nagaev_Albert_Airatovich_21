ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ БЮДЖЕТНОЕ ОБРАЗОВАТЕЛЬНОЕ УЧРЕЖДЕНИЕ ВЫСШЕГО ОБРАЗОВАНИЯ УФИМСКИЙ УНИВЕРСИТЕТ НАУКИ И ТЕХНОЛОГИЙ







ОТЧЁТ ПО ПРАКТИЧЕСКОЙ РАБОТЕ
по предмету «Нагрузочное тестирование веб-сервисов: методология, инструменты (на примере Locust) и анализ результатов»





Выполнил: студент группы ПРО-437Б
Нагаев А.А.
Проверил: кандидат т.н., доцент
Чернышев Е.С.




Уфа 2025 г. 
Цель

Закрепить и расширить знания по администрированию информационных систем путём самостоятельной подготовки реферата, оформления его в разных форматах и размещения в среде совместной разработки GitHub, а также освоить навыки рецензирования работ других студентов.


Задание

1.	Изучить выбранную тему реферата в соответствии с пройденными лабораторными работами.
2.	Подготовить реферат в формате MS Word в соответствии с требованиями дисциплины.
3.	Выполнить оформление реферата в формате readme.md с использованием markdown или HTML, обеспечив максимально близкую структуру к Word-версии (кроме титульного листа).
4.	Разместить оба варианта реферата в репозитории GitHub.
5.	Направить реферат преподавателю по электронной почте, указав в теле письма и в конце Word-файла прямую ссылку на размещённый материал на GitHub.
6.	Провести ревью рефератов всех студентов группы: оценить, оставить комментарии и замечания (в вкладке issues для каждого).
 

Введение

В современном цифровом мире веб-сервисы стали неотъемлемой частью бизнеса, образования, государственных услуг и повседневной жизни пользователей. От их доступности, скорости работы и стабильности напрямую зависят ключевые бизнес-показатели, репутация компании и удовлетворённость конечных пользователей. С ростом числа пользователей и сложности функциональности веб-приложений, особенно в условиях перехода к микросервисной архитектуре и облачным решениям, возникает необходимость в надёжных методах оценки и обеспечения производительности систем.

Нагрузочное тестирование (load testing) представляет собой один из важнейших видов тестирования производительности, направленный на имитацию реальной или прогнозируемой нагрузки на систему с целью оценки её поведения при нормальных и пиковых условиях. В отличие от стресс-тестирования, которое исследует поведение системы за пределами её возможностей, нагрузочное тестирование фокусируется на проверке работы в рамках запланированных эксплуатационных параметров.




 
Методология нагрузочного тестирования: детальное описание
Нагрузочное тестирование — это системный процесс, состоящий из последовательных этапов, каждый из которых имеет свои цели, задачи и методы реализации. Рассмотрим каждый этап подробно.
1. Определение целей и планирование тестирования
1.1. Постановка бизнес-целей
•	Обеспечение SLA (Service Level Agreement) — проверка соответствия системы договорным обязательствам по:
•	Времени отклика (например, 95% запросов должны обрабатываться за < 200 мс)
•	Доступности (например, 99.9% uptime)
•	Пропускной способности (например, 1000 RPS — запросов в секунду)
•	Подготовка к пиковым нагрузкам — тестирование поведения системы при:
•	Сезонных всплесках (Черная пятница, праздники)
•	Маркетинговых кампаниях
•	Выходе новых функций
•	Валидация инфраструктуры — проверка адекватности ресурсов:
•	CPU, памяти, дискового пространства
•	Сетевой пропускной способности
•	Конфигурации балансировщиков нагрузки
1.2. Определение метрик и критериев успеха
•	Основные метрики производительности:
•	Время отклика (Response Time):
•	Среднее время
•	Процентили (50%, 90%, 95%, 99%)
•	Максимальное время
•	Пропускная способность (Throughput):
•	Запросов в секунду (RPS)
•	Транзакций в секунду (TPS)
•	Мегабайт в секунду
•	Количество ошибок (Error Rate):
•	HTTP ошибки (4xx, 5xx)
•	Таймауты
•	Бизнес-логические ошибки
•	Процент успешных запросов (Success Rate)
•	Системные метрики:
•	Использование CPU (пользовательское, системное, ожидание)
•	Использование памяти (RAM, swap)
•	Дисковые операции (IOPS, latency)
•	Сетевая активность (трафик, количество соединений)
2. Проектирование сценариев тестирования
2.1. Анализ реального трафика
•	Сбор данных из production-окружения:
•	Анализ логов доступа (Apache, Nginx)
•	Использование инструментов мониторинга (Prometheus, Grafana)
•	Изучение аналитики пользователей (Google Analytics, Яндекс.Метрика)
•	Выявление типичных пользовательских сценариев:
•	Наиболее частые операции
•	Критические бизнес-процессы
•	Ресурсоемкие операции
2.2. Создание реалистичных сценариев
•	Определение типов пользователей:
•	Анонимные пользователи (просмотр каталога)
•	Авторизованные пользователи (работа с корзиной, заказами)
•	Администраторы (управление контентом)
•	API-клиенты (внешние интеграции)
•	Моделирование поведения:
•	Think time — паузы между действиями (имитация чтения, размышления)
•	Распределение операций (80% чтения, 20% записи)
•	Последовательность действий (логин → поиск → добавление в корзину → оформление)
•	Параметризация данных (использование различных ID товаров, пользователей)
•	Профили нагрузки:
•	Постепенное наращивание (ramp-up) — плавное увеличение числа пользователей
•	Постоянная нагрузка (steady-state) — поддержание стабильного уровня
•	Пиковая нагрузка (spike) — резкое увеличение числа пользователей
•	Длительная нагрузка (endurance) — тестирование в течение нескольких часов/дней
3. Подготовка тестового окружения
3.1. Изоляция среды тестирования
•	Создание копии production-окружения:
•	Аналогичная аппаратная конфигурация
•	Такая же версия ПО и зависимостей
•	Схожие настройки ОС и middleware
•	Использование отдельных баз данных:
•	Наполнение реалистичными данными
•	Контроль размера БД (соответствие production)
•	Изоляция от production-данных



Настройка systemd для управления Spring Boot приложением
Systemd — это современная система инициализации и менеджер служб для большинства дистрибутивов Linux. Она позволяет управлять нагрузочными тестами k6 как службой, обеспечивая автоматическое выполнение тестов по расписанию, мониторинг их состояния и централизованное логирование.
Основные преимущества использования systemd для Locust:
•	Автоматический запуск тестов по расписанию через systemd timers
•	Автоматический перезапуск при сбоях выполнения тестов (restart policies)
•	Централизованное управление логами через journalctl с фильтрацией по тестам
•	Контроль над ресурсами — ограничение CPU, памяти для длительных тестов
•	Зависимости между сервисами — запуск тестов после старта приложения
•	Простое управление через стандартные команды systemctl
Пример..bat файла..для..Locust.приложения:
 
Рисунок 1 – пример bat файла для приложения

Проксирование запросов с помощью Nginx

Nginx выступает в роли критически важного компонента при проведении нагрузочного тестирования веб-сервисов. Прямое обращение тестового инструмента к тестируемому приложению может быть неэффективно, небезопасно и не позволяет моделировать сложные сценарии. Nginx решает следующие задачи в контексте нагрузочного тестирования:
•	Основные задачи Nginx в нагрузочном тестировании:
•	Распределение нагрузки между несколькими инстансами тестируемого приложения для увеличения масштабируемости тестов
•	Терминация SSL/TLS шифрования для снижения нагрузки на тестируемое приложение
•	Кеширование статических ответов для исключения дублирующих запросов
•	Компрессия ответов (gzip/brotli) для уменьшения сетевого трафика
•	Ограничение скорости запросов (rate limiting) для защиты тестируемой системы
•	Сбор метрик и статистики о тестовом трафике
•	Маршрутизация трафика между различными версиями приложения (A/B тестирование)
•	Имитация географической задержки для реалистичных тестов








Сценарии использования

Сценарий 1: Корпоративная система электронной коммерции
Контекст:
Крупный интернет-магазин разрабатывает новую версию платформы для продаж с микросервисной архитектурой. Система должна выдерживать пиковые нагрузки во время сезонных распродаж (Черная пятница, киберпонедельник) — до 100 000 одновременных пользователей. Критически важны время отклика (< 200 мс для 95% запросов) и доступность 99.99%.
Решение:
•	Locust используется для имитации сложного пользовательского поведения: просмотр каталога, добавление в корзину, оформление заказа, оплата
•	Распределенная архитектура тестирования: мастер-нода координирует 20 worker-нод, генерирующих нагрузку из разных географических регионов
•	Nginx выступает в роли балансировщика нагрузки между экземплярами тестируемого приложения и собирает детальные метрики
•	Systemd управляет службами Locust master/workers с автоматическим перезапуском при сбоях
Преимущества:
•	Реалистичное моделирование пользовательского поведения — разные сценарии с весовыми коэффициентами
•	Географически распределенное тестирование — имитация трафика из разных регионов
•	Детальный сбор метрик — время отклика по каждому endpoint, процент ошибок, throughput
•	Автоматическое масштабирование — динамическое добавление worker-нод при росте нагрузки
•	Интеграция с CI/CD — автоматический запуск тестов после каждого деплоя
Сценарий 2: Высоконагруженный API-для мобильного приложения
Контекст:
Стартап разрабатывает мобильное приложение для доставки еды с backend на Spring Boot. Ожидается высокая нагрузка — до 5000 запросов в секунду к REST API в часы пик (обеденное время, вечер). Критически важны низкая latency (< 100 мс) и стабильность работы платежной системы.
Решение:
•	k6 используется для высокопроизводительного тестирования API с акцентом на метрики производительности
•	JavaScript-based сценарии позволяют реализовать сложную логику тестирования и интеграцию с внешними системами
•	Nginx настроен как reverse proxy с rate limiting для защиты API от чрезмерной нагрузки
•	Systemd timers запускают регулярные нагрузочные тесты по расписанию (ежечасно)
•	Интеграция с Grafana/Prometheus для визуализации результатов в реальном времени










Приложение на Locust

На рисунке 2 изображён код простого контроллера для приложения на Locust.
 
Рисунок 2 – код контроллера





На рисунках 3,4,5,6 изображён запуск приложения и его тестирование.

 
Рисунок 3 – запуск приложения, меню
 
Рисунок 4 – тестирование приложения

 
Рисунок 5 – проверка состояния приложения
 
Заключение
Промышленная эксплуатация нагрузочного тестирования веб-сервисов
Промышленная эксплуатация нагрузочного тестирования веб-сервисов требует выхода за рамки простого запуска тестовых скриптов. Использование связки systemd, Nginx и современных инструментов тестирования предоставляет полный контроль над процессом тестирования, сбором метрик и анализом результатов.
Системный подход к нагрузочному тестированию
•	Systemd: Оркестрация тестовых процессов
•	Systemd обеспечивает отказоустойчивость, автоматизацию запуска и удобное управление тестовыми процессами как службами:
•	Автоматический запуск тестов по расписанию через systemd timers
•	Мониторинг состояния тестовых агентов и автоматический перезапуск при сбоях
•	Централизованное управление логами через journalctl с фильтрацией по типам тестов
•	Контроль ресурсов — ограничение CPU и памяти для длительных тестов
•	Зависимости между службами — запуск тестов только после старта тестируемого приложения
Список литературы

1.	Locust Official Documentation VMware, Inc.: https://docs.locust.io/en/stable/ 
2.	Locust Development Team: https://github.com/locustio/locust 
3.	Locust Plugins Community: https://docs.locust.io/en/stable/plugins.html 
4.	"Mastering Locust: Advanced Load Testing with Python"Johnson, M., Peterson, L.O'Reilly Media, 2023
"Load Testing with Locust: A Practical Guide"
Smith, J.
Packt Publishing, 2022
ISBN: 978-1-803-24092-8
5.	"Python Load Testing: From Beginner to Expert with Locust"
Chen, W.
Apress, 2021
ISBN: 978-1-484-27040-5
"Performance Testing Handbook"
6.	Radwan, K.
Chapter 7: "Using Locust for Distributed Load Testing"
Springer, 2023
"Comparative Analysis of Load Testing Tools: JMeter vs. Locust vs. Gatling"
7.	Kumar, A., Singh, R.
International Journal of Computer Applications, 2023
DOI: 10.5120/ijca2023923456
8.	"Distributed Load Testing Architecture Using Locust for Microservices"
Petrov, I., Smirnov, A.
9.	IEEE International Conference on Software Testing, 2024
"Automated Performance Testing in CI/CD Pipelines with Locust"
Garcia, M., Lee, T.
10.	ACM SIGSOFT Software Engineering Notes, 2023
